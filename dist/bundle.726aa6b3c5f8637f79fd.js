"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[296],{210:function(t,n,e){var o=e(173),s=e(671),i=e(553);const a={apiKey:"AIzaSyCIH_DfM3g335LNNPnT0tA6s0oSfdPpuJQ",authDomain:"notate-599b5.firebaseapp.com",projectId:"notate-599b5",storageBucket:"notate-599b5.appspot.com",messagingSenderId:"316248793583",appId:"1:316248793583:web:95e8113298fcc476e2561a",measurementId:"G-CW9CLCNEKD"},l=(0,s.ZF)(a);(0,i.IH)(l);var c=e(713);class r{constructor(){throw new Error("Can't create an instance of Component class!")}applyStyles(t){for(let n in t)this.style[n]=t[n]}render(){null!=this.view&&(this.innerHTML=this.view.content,r.prototype.applyStyles.call(this,this.view.styles))}}class p{static transferToJSON(t){return JSON.stringify(p.transferToObject(t))}static transferToObject(t){let n={};for(let[e,o]of t.entries())n[e]=o;return n}}class m extends HTMLFormElement{constructor(){super(),this.disabled=!1,this.controls=null}deactivateControls(t=Object.values(this.controls)){t.forEach((t=>this.elements[t].setAttribute("disabled",!0))),this.disabled=!0}activateControls(){for(let t of this.elements)t.removeAttribute("disabled");this.disabled=!1}isEmpty(...t){return t.some((t=>!function(t){let n=(t=[...t]).findIndex((t=>" "==t));for(;-1!=n;)t.splice(n,1),n=t.findIndex((t=>" "==t));return t.join("")}(this.getControl(t)?.value).length),this)}getControl(t){return this.elements[t]}}window.customElements.define("form-component",m,{extends:"form"});const d=t=>`<div class="img-wrapper d-flex justify-content-center mb-5">\n                <img src="../assets/brand-notate.svg" alt="brand-notate" class="${t.name}-img d-flex">\n            </div>\n            <div class="controls-wrapper d-flex flex-column">\n                <input class="mb-3 form-control" type="email" name="${t.controls.input_login}" id="${t.controls.input_login}" placeholder="Email">\n                <input class="mb-3 form-control" type="password" name="${t.controls.input_password}" id="${t.controls.input_password}" placeholder="Password">\n                <div class="text-center mb-3 animated-hidden transition-hidden" id="${t.name}-tooltip"></div>\n                <div class="button-group d-flex flex-column">\n                    <button class="mb-3 btn btn-outline-dark" type="submit" name="${t.controls.btn_login}" id="${t.controls.btn_login}">Login</button>\n                    <button class="btn btn-dark" type="submit" name="${t.controls.btn_signup}" id=${t.controls.btn_signup}>Signup</button>\n                </div>\n            </div>`,u={width:"300px"};class h{constructor(){var t;this.component=new m,this.component.name="auth-form",this.component.autocomplete="off",this.component.controls={input_login:this.component.name+"-login",input_password:this.component.name+"-password",btn_login:this.component.name+"-log-in",btn_signup:this.component.name+"-sign-up"},this.component.view=(t=this.component,{content:d(t),styles:u}),r.prototype.render.call(this.component),this.component.deactivateControls.call(this.component,[this.component.controls.btn_login,this.component.controls.btn_signup]),this.component.oninput=t=>{this.component.isEmpty(this.component.controls.input_login,this.component.controls.input_password)?this.component.deactivateControls.call(this.component,[this.component.controls.btn_login,this.component.controls.btn_signup]):this.component.activateControls.call(this.component)}}showTooltip(t="Invalid login or password!",n="text-danger"){let e=this.component.querySelector(`#${this.component.name}-tooltip`);e.classList.add(n),e.textContent=t,e.classList.remove("animated-hidden"),setTimeout((()=>{e.classList.add("animated-hidden"),e.textContent="",e.classList.remove(n)}),4e3)}freeze(t){this.component.deactivateControls(),setTimeout((()=>{this.component.activateControls()}),t)}}const b=t=>`<div class="${t.name}_modal-dialog modal-dialog modal-dialog-centered" role="document">\n                <div class="${t.name}_modal-content modal-content">\n                    <div class="${t.name}_modal-header modal-header">\n                        <h3>Create new user!</h3>\n                    </div>\n                    <div class="${t.name}_modal-body modal-body">\n                        <input required class="mb-3 form-control" placeholder="Name" type="text" name="${t.controls.input_name}" id="${t.controls.input_name}">\n                        <input required class="mb-3 form-control" placeholder="Lastname" type="text" name="${t.controls.input_lastname}" id="${t.controls.input_lastname}">\n                        <input required class="mb-3 form-control" placeholder="Email" type="email" name="${t.controls.input_email}" id="${t.controls.input_email}">\n                        <input required class="mb-3 form-control" placeholder="Country" type="text" name="${t.controls.input_country}" id="${t.controls.input_country}">\n                        <input required class="mb-3 form-control" placeholder="Password" type="password" name="${t.controls.input_password}" id="${t.controls.input_password}">\n                        <input required class="mb-3 form-control" placeholder="Confirm password" type="password" name="${t.controls.input_confirm}" id="${t.controls.input_confirm}">\n                        <div class="mb-4 alert animated-hidden transition-hidden" role="alert" id="${t.name}-tooltip"></div>\n                        <div class="button-group d-flex justify-content-end align-items-center">\n                            <button class="btn btn-outline-dark px-5 py-1" type="button" name="${t.controls.btn_close}" id="${t.controls.btn_close}">Close</button>\n                            <button class="btn btn-dark ms-3 px-5 py-1" type="submit" name="${t.controls.btn_signup}" id="${t.controls.btn_signup}">Signup</button>\n                        </div>\n                    </div>\n                </div>\n            </div>`,f={};class g{constructor(){var t;this.component=new m,this.component.name="signup-form",this.component.id=this.component.name,this.component.classList.add("modal","fade"),this.component.setAttribute("tabindex","-1"),this.component.setAttribute("data-bs-backdrop","static"),this.component.setAttribute("data-bs-keyboard","false"),this.component.controls={input_name:this.component.name+"-name",input_lastname:this.component.name+"-lastname",input_email:this.component.name+"-email",input_country:this.component.name+"-country",input_password:this.component.name+"-password",input_confirm:this.component.name+"-confirm",btn_close:this.component.name+"-close",btn_signup:this.component.name+"signup"},this.component.view=(t=this.component,{content:b(t),styles:f}),r.prototype.render.call(this.component)}showTooltip(t,n="alert-danger"){let e=this.component.querySelector(`#${this.component.name}-tooltip`);e.classList.add(n),e.textContent=t,e.classList.remove("animated-hidden"),setTimeout((()=>{e.classList.add("animated-hidden"),e.textContent="",e.classList.remove(n)}),6e3)}set onclose(t){this.component.querySelector(`#${this.component.controls.btn_close}`).addEventListener("click",t)}}(new class{constructor(){this.app={},this.app.element=document.getElementById("app"),this.app.firebase={config:a,app:l,auth:(0,c.v0)(l)}}run(){{let t,n,e=new h;e.component.onsubmit=function(e){e.preventDefault(),this.disabled||(t=this.elements[this.controls.input_login].value,n=this.elements[this.controls.input_password].value,this.dispatchEvent(new Event(e.submitter.name)))},e.component.addEventListener(e.component.controls.btn_login,(e=>{this.loginUser(t,n)})),e.component.addEventListener(e.component.controls.btn_signup,(t=>{e.component.reset(),this.createUser()})),this.app.element.append(e.component),this.app.element.classList.add("d-flex","align-items-center","justify-content-center")}}loginUser(t,n){}createUser(){let t=new g;this.app.element.append(t.component);let n=new o.u_(`#${t.component.id}`);n.show(),t.component.onsubmit=e=>{e.preventDefault();let o=t.component.elements[t.component.controls.input_password],s=t.component.elements[t.component.controls.input_confirm];if(o.value!=s.value)return void t.showTooltip("Not equals!");let i=p.transferToObject(new FormData(t.component)),a=i[t.component.controls.input_email],l=i[t.component.controls.input_password];(0,c.Xb)(this.app.firebase.auth,a,l).then((e=>{console.log(e),console.log(this.app.firebase.auth),n.hide(),t.component.remove()})).catch((n=>{n.code==c.kq.EMAIL_EXISTS?t.showTooltip("Email already exists!"):n.code==c.kq.WEAK_PASSWORD?t.showTooltip("Too weak password! Password length should be at least 6 symbols!","alert-warning"):t.showTooltip("Something went wrong. Try later!")}))},t.onclose=function(e){n.hide(),t.component.remove()}}}).run()}},function(t){t.O(0,[736],(function(){return 210,t(t.s=210)})),t.O()}]);